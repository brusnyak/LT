2025-05-01 15:23:29,987 - __main__ - INFO - Starting ICT strategy tests
2025-05-01 15:23:29,988 - trading_bot.data.ctrader_data - INFO - Connecting to cTrader API...
2025-05-01 15:23:30,087 - trading_bot.data.ctrader_data - INFO - Connected to cTrader Open API
2025-05-01 15:23:31,149 - trading_bot.data.ctrader_data - INFO - Application authenticated successfully
2025-05-01 15:23:31,994 - trading_bot.data.ctrader_data - INFO - Connected to cTrader Open API
2025-05-01 15:23:32,002 - trading_bot.data.crypto_data - INFO - Initialized binance exchange connection
2025-05-01 15:23:32,002 - trading_bot.data.data_processor - INFO - Connected to cTrader for live data
2025-05-01 15:23:32,002 - __main__ - INFO - Waiting for cTrader authentication...
2025-05-01 15:23:32,156 - trading_bot.data.ctrader_data - INFO - Account authenticated successfully
2025-05-01 15:23:32,156 - __main__ - INFO - 
=== Testing Single Timeframe Analysis ===
2025-05-01 15:23:32,156 - __main__ - INFO - Fetching live data for EURUSD H1 from API...
2025-05-01 15:23:32,156 - trading_bot.data.ctrader_data - INFO - Requesting 100 H1 historical bars for EURUSD...
2025-05-01 15:23:32,156 - trading_bot.data.ctrader_data - INFO - From: 2025-04-27 11:23:32.156000
2025-05-01 15:23:32,156 - trading_bot.data.ctrader_data - INFO - To: 2025-05-01 15:23:32.156000
2025-05-01 15:23:33,204 - trading_bot.data.ctrader_data - INFO - Historical data saved to data/EURUSD_H1.csv
2025-05-01 15:23:33,204 - trading_bot.data.ctrader_data - INFO - Saved 88 rows to CSV for EURUSD H1
2025-05-01 15:23:33,204 - __main__ - INFO - Successfully loaded 88 candles for EURUSD H1
2025-05-01 15:23:33,204 - trading_bot.strategy.strategy_base - INFO - Initialized ict strategy
2025-05-01 15:23:33,204 - trading_bot.strategy.ict_strategy - INFO - Initialized ICT strategy
2025-05-01 15:23:33,215 - trading_bot.data.crypto_data - INFO - Initialized binance exchange connection
2025-05-01 15:23:33,215 - trading_bot.data.data_processor - INFO - Connected to cTrader for live data
2025-05-01 15:23:33,215 - trading_bot.strategy.strategy_base - INFO - Initialized Smart Money Concepts strategy
2025-05-01 15:23:33,215 - trading_bot.strategy.smc_strategy - INFO - Initialized SMC strategy with SMC and Session analyzers
2025-05-01 15:23:33,215 - trading_bot.strategy.signal_generator - INFO - Added smc strategy to signal generator
2025-05-01 15:23:33,215 - trading_bot.strategy.strategy_base - INFO - Initialized ict strategy
2025-05-01 15:23:33,215 - trading_bot.strategy.ict_strategy - INFO - Initialized ICT strategy
2025-05-01 15:23:33,215 - trading_bot.strategy.signal_generator - INFO - Added ict strategy to signal generator
2025-05-01 15:23:33,215 - trading_bot.strategy.strategy_base - INFO - Initialized combined strategy
2025-05-01 15:23:33,215 - trading_bot.strategy.strategy_base - INFO - Initialized Smart Money Concepts strategy
2025-05-01 15:23:33,215 - trading_bot.strategy.smc_strategy - INFO - Initialized SMC strategy with SMC and Session analyzers
2025-05-01 15:23:33,215 - trading_bot.strategy.strategy_base - INFO - Initialized ict strategy
2025-05-01 15:23:33,215 - trading_bot.strategy.ict_strategy - INFO - Initialized ICT strategy
2025-05-01 15:23:34,015 - trading_bot.analysis.sentiment - INFO - Loaded distilbert sentiment model successfully
2025-05-01 15:23:34,015 - trading_bot.strategy.combined_strategy - INFO - Initialized combined strategy with SMC, ICT, Technical, and Sentiment analysis
2025-05-01 15:23:34,015 - trading_bot.strategy.signal_generator - INFO - Added combined strategy to signal generator
2025-05-01 15:23:34,015 - trading_bot.strategy.strategy_base - INFO - Initialized Unified Strategy strategy
2025-05-01 15:23:34,016 - trading_bot.strategy.signal_generator - INFO - Added unified strategy to signal generator
2025-05-01 15:23:34,016 - trading_bot.strategy.signal_generator - INFO - Added UnifiedStrategy with enhanced multi-timeframe analysis
2025-05-01 15:23:34,289 - trading_bot.analysis.sentiment - INFO - Loaded distilbert sentiment model successfully
2025-05-01 15:23:34,289 - trading_bot.strategy.signal_generator - INFO - Initialized signal generator with 4 strategies
2025-05-01 15:23:34,289 - trading_bot.strategy.signal_generator - INFO - Signal generator initialized with all strategies
2025-05-01 15:23:34,289 - trading_bot.strategy.signal_generator - INFO - Added ict strategy to signal generator
2025-05-01 15:23:34,289 - __main__ - INFO - Testing ICT strategy with EURUSD data
2025-05-01 15:23:34,290 - trading_bot.strategy.signal_generator - INFO - Generating signals for EURUSD on H1 timeframe
2025-05-01 15:23:34,290 - trading_bot.strategy.smc_strategy - INFO - Analyzing EURUSD on H1 timeframe using SMC strategy
2025-05-01 15:23:34,290 - trading_bot.analysis.smc_analyzer - INFO - Starting SMC analysis for EURUSD with 88 candles
2025-05-01 15:23:34,297 - trading_bot.analysis.smc_analyzer - INFO - Market structure for EURUSD: bearish
2025-05-01 15:23:34,308 - trading_bot.analysis.smc_analyzer - INFO - Found 9 key levels for EURUSD
2025-05-01 15:23:34,314 - trading_bot.analysis.smc_analyzer - INFO - Found 6 order blocks for EURUSD
2025-05-01 15:23:34,316 - trading_bot.analysis.smc_analyzer - INFO - Found 1 fair value gaps for EURUSD
2025-05-01 15:23:34,326 - trading_bot.analysis.smc_analyzer - INFO - Found 9 liquidity levels for EURUSD
2025-05-01 15:23:34,327 - trading_bot.analysis.smc_analyzer - INFO - Order flow analysis completed for EURUSD
2025-05-01 15:23:34,328 - trading_bot.analysis.smc_analyzer - INFO - Found 4 liquidity sweeps for EURUSD
2025-05-01 15:23:34,328 - trading_bot.analysis.smc_analyzer - INFO - Analyzing trade setups for Unknown with 88 candles
2025-05-01 15:23:34,333 - trading_bot.analysis.smc_analyzer - INFO - Market structure identified: downtrend
2025-05-01 15:23:34,339 - trading_bot.analysis.smc_analyzer - INFO - Order blocks identified: 6
2025-05-01 15:23:34,341 - trading_bot.analysis.smc_analyzer - INFO - Fair value gaps identified: 1
2025-05-01 15:23:34,350 - trading_bot.analysis.smc_analyzer - INFO - Liquidity levels identified: 9
2025-05-01 15:23:34,352 - trading_bot.analysis.smc_analyzer - INFO - Found 0 trade setups for EURUSD
2025-05-01 15:23:34,386 - trading_bot.analysis.smc_analyzer - INFO - Found 1 Classic Buy/Sell Day patterns for EURUSD
2025-05-01 15:23:34,386 - trading_bot.analysis.smc_analyzer - INFO - Found 3 London Swing to NY Reversal patterns for EURUSD
2025-05-01 15:23:34,448 - trading_bot.strategy.smc_strategy - INFO - Found 1 Classic Buy/Sell Day patterns for EURUSD
2025-05-01 15:23:34,448 - trading_bot.strategy.smc_strategy - INFO - Found 3 London Swing to NY Reversal patterns for EURUSD
2025-05-01 15:23:34,448 - trading_bot.strategy.smc_strategy - INFO - Found 4 session-based signals for EURUSD
2025-05-01 15:23:34,448 - trading_bot.strategy.signal_generator - INFO - Strategy smc generated 12 signals
2025-05-01 15:23:34,448 - trading_bot.strategy.ict_strategy - INFO - Generating ICT signals for EURUSD on H1
2025-05-01 15:23:34,534 - trading_bot.strategy.ict_strategy - ERROR - Error generating ICT signals for EURUSD on H1: ICTStrategy.identify_high_probability_setups() missing 3 required positional arguments: 'symbol', 'timeframe', and 'analysis'
Traceback (most recent call last):
  File "/Users/yegor/Documents/Agency & Security Stuff/trading bot 2/trading_bot/strategy/ict_strategy.py", line 317, in generate_signals
    high_prob_setups = self.identify_high_probability_setups(analysis)
TypeError: ICTStrategy.identify_high_probability_setups() missing 3 required positional arguments: 'symbol', 'timeframe', and 'analysis'
2025-05-01 15:23:34,535 - trading_bot.strategy.signal_generator - INFO - Strategy ict generated 0 signals
2025-05-01 15:23:34,535 - trading_bot.strategy.combined_strategy - INFO - Analyzing EURUSD on H1 with combined strategy
2025-05-01 15:23:34,535 - trading_bot.strategy.smc_strategy - INFO - Analyzing EURUSD on H1 timeframe using SMC strategy
2025-05-01 15:23:34,535 - trading_bot.analysis.smc_analyzer - INFO - Starting SMC analysis for EURUSD with 88 candles
2025-05-01 15:23:34,540 - trading_bot.analysis.smc_analyzer - INFO - Market structure for EURUSD: bearish
2025-05-01 15:23:34,551 - trading_bot.analysis.smc_analyzer - INFO - Found 9 key levels for EURUSD
2025-05-01 15:23:34,556 - trading_bot.analysis.smc_analyzer - INFO - Found 6 order blocks for EURUSD
2025-05-01 15:23:34,558 - trading_bot.analysis.smc_analyzer - INFO - Found 1 fair value gaps for EURUSD
2025-05-01 15:23:34,568 - trading_bot.analysis.smc_analyzer - INFO - Found 9 liquidity levels for EURUSD
2025-05-01 15:23:34,569 - trading_bot.analysis.smc_analyzer - INFO - Order flow analysis completed for EURUSD
2025-05-01 15:23:34,570 - trading_bot.analysis.smc_analyzer - INFO - Found 4 liquidity sweeps for EURUSD
2025-05-01 15:23:34,570 - trading_bot.analysis.smc_analyzer - INFO - Analyzing trade setups for Unknown with 88 candles
2025-05-01 15:23:34,575 - trading_bot.analysis.smc_analyzer - INFO - Market structure identified: downtrend
2025-05-01 15:23:34,581 - trading_bot.analysis.smc_analyzer - INFO - Order blocks identified: 6
2025-05-01 15:23:34,583 - trading_bot.analysis.smc_analyzer - INFO - Fair value gaps identified: 1
2025-05-01 15:23:34,592 - trading_bot.analysis.smc_analyzer - INFO - Liquidity levels identified: 9
2025-05-01 15:23:34,594 - trading_bot.analysis.smc_analyzer - INFO - Found 0 trade setups for EURUSD
2025-05-01 15:23:34,625 - trading_bot.analysis.smc_analyzer - INFO - Found 1 Classic Buy/Sell Day patterns for EURUSD
2025-05-01 15:23:34,625 - trading_bot.analysis.smc_analyzer - INFO - Found 3 London Swing to NY Reversal patterns for EURUSD
2025-05-01 15:23:34,686 - trading_bot.strategy.smc_strategy - INFO - Found 1 Classic Buy/Sell Day patterns for EURUSD
2025-05-01 15:23:34,686 - trading_bot.strategy.smc_strategy - INFO - Found 3 London Swing to NY Reversal patterns for EURUSD
2025-05-01 15:23:34,770 - trading_bot.analysis.technical - INFO - Starting technical analysis for EURUSD with 88 candles
2025-05-01 15:23:34,770 - trading_bot.analysis.technical - INFO - Data range: 2025-04-27 23:00:00 to 2025-05-01 14:00:00
2025-05-01 15:23:34,772 - trading_bot.analysis.technical - INFO - Found 2 candlestick patterns
2025-05-01 15:23:34,822 - trading_bot.strategy.signal_generator - INFO - Strategy combined generated 3 signals
2025-05-01 15:24:04,829 - trading_bot.strategy.signal_generator - ERROR - Error running async strategy unified: 
2025-05-01 15:24:04,832 - trading_bot.strategy.signal_generator - INFO - Strategy unified generated 0 signals
2025-05-01 15:24:04,832 - __main__ - INFO - Analysis bias: bearish
2025-05-01 15:24:04,832 - __main__ - INFO - Found 1 order blocks
2025-05-01 15:24:04,833 - __main__ - INFO - Found 0 fair value gaps
2025-05-01 15:24:04,833 - __main__ - INFO - Found 28 liquidity levels
2025-05-01 15:24:04,833 - __main__ - INFO - Found 0 OTE zones
2025-05-01 15:24:04,833 - __main__ - INFO - Found 0 breaker blocks
2025-05-01 15:24:04,833 - __main__ - INFO - Found 4 kill zones
2025-05-01 15:24:04,833 - __main__ - INFO - Found 0 market shifts
2025-05-01 15:24:04,833 - __main__ - INFO - Found 4 entry points
2025-05-01 15:24:04,833 - __main__ - INFO - Found 0 session levels
2025-05-01 15:24:04,833 - __main__ - INFO - Generated 1 signals
2025-05-01 15:24:04,833 - __main__ - INFO - Signal 1:
2025-05-01 15:24:04,833 - __main__ - INFO -   Type: sell
2025-05-01 15:24:04,834 - __main__ - INFO -   Direction: bearish
2025-05-01 15:24:04,834 - __main__ - INFO -   Entry: 1.137
2025-05-01 15:24:04,834 - __main__ - INFO -   Stop Loss: 1.14144
2025-05-01 15:24:04,835 - __main__ - INFO -   Take Profit: 1.12812
2025-05-01 15:24:04,835 - __main__ - INFO -   Risk-Reward: 2.00
2025-05-01 15:24:04,835 - __main__ - INFO -   Strength: 90
2025-05-01 15:24:04,835 - __main__ - INFO -   Setup Type: classic_buy_sell_day
2025-05-01 15:24:04,835 - __main__ - INFO -   Description: [Session-Based] Classic Sell Day: Asia up/consolidation, London breaks lower, NY continuation
2025-05-01 15:24:04,861 - __main__ - INFO - Single Timeframe Analysis: Passed
2025-05-01 15:24:04,861 - __main__ - INFO - 
=== Testing Multi-Timeframe Analysis ===
2025-05-01 15:24:04,873 - __main__ - INFO - Successfully loaded 5 rows from data/EURUSD_M5.csv
2025-05-01 15:24:04,875 - __main__ - INFO - Successfully loaded 88 rows from data/EURUSD_H1.csv
2025-05-01 15:24:04,877 - __main__ - INFO - Successfully loaded 20 rows from data/EURUSD_D1.csv
2025-05-01 15:24:04,877 - __main__ - INFO - Successfully loaded data for all timeframes
2025-05-01 15:24:04,877 - __main__ - INFO - Lower TF (M5): 5 candles
2025-05-01 15:24:04,877 - __main__ - INFO - Middle TF (H1): 88 candles
2025-05-01 15:24:04,877 - __main__ - INFO - Higher TF (D1): 20 candles
2025-05-01 15:24:04,877 - trading_bot.strategy.strategy_base - INFO - Initialized ict strategy
2025-05-01 15:24:04,878 - trading_bot.strategy.ict_strategy - INFO - Initialized ICT strategy
2025-05-01 15:24:04,878 - trading_bot.strategy.ict_strategy - ERROR - Error generating signals from MTF analysis: 'coroutine' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/yegor/Documents/Agency & Security Stuff/trading bot 2/trading_bot/strategy/ict_strategy.py", line 378, in generate_signals_from_mtf_analysis
    signals = mtf_analysis.get('trade_signals', [])
AttributeError: 'coroutine' object has no attribute 'get'
2025-05-01 15:24:04,878 - __main__ - ERROR - Error in test_ict_strategy_multi_timeframe: 'coroutine' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/yegor/Documents/Agency & Security Stuff/trading bot 2/tests/test_ict_strategy.py", line 551, in test_ict_strategy_multi_timeframe
    logger.info(f"MTF Analysis bias: {mtf_analysis.get('bias', 'unknown')}")
AttributeError: 'coroutine' object has no attribute 'get'
2025-05-01 15:24:04,881 - __main__ - INFO - Multi-Timeframe Analysis: Failed
2025-05-01 15:24:04,881 - __main__ - INFO - 
=== Testing High-Probability Setups ===
2025-05-01 15:24:04,883 - __main__ - INFO - Successfully loaded 88 rows from data/EURUSD_H1.csv
2025-05-01 15:24:04,883 - __main__ - INFO - Successfully loaded 88 candles for EURUSD H1
2025-05-01 15:24:04,883 - trading_bot.strategy.strategy_base - INFO - Initialized ict strategy
2025-05-01 15:24:04,883 - trading_bot.strategy.ict_strategy - INFO - Initialized ICT strategy
2025-05-01 15:24:04,971 - __main__ - ERROR - Error in test_high_probability_setups: 'list' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/yegor/Documents/Agency & Security Stuff/trading bot 2/tests/test_ict_strategy.py", line 612, in test_high_probability_setups
    signals = ict_strategy.generate_signals_from_setups(setups, df, symbol, timeframe)
  File "/Users/yegor/Documents/Agency & Security Stuff/trading bot 2/trading_bot/strategy/ict_strategy.py", line 782, in generate_signals_from_setups
    ict_signals = self._generate_signals_from_ict(df, symbol, timeframe, setups.get('ict_analysis', {}))
AttributeError: 'list' object has no attribute 'get'
2025-05-01 15:24:04,971 - __main__ - INFO - 
=== Testing Dynamic Risk-Reward Calculation ===
2025-05-01 15:24:04,971 - trading_bot.strategy.strategy_base - INFO - Initialized ict strategy
2025-05-01 15:24:04,971 - trading_bot.strategy.ict_strategy - INFO - Initialized ICT strategy
2025-05-01 15:24:04,971 - __main__ - INFO - Testing risk-reward scenario 1:
2025-05-01 15:24:04,971 - __main__ - INFO -   Direction: BUY
2025-05-01 15:24:04,971 - __main__ - INFO -   Entry Price: 1.1
2025-05-01 15:24:04,971 - __main__ - INFO -   Zone: {'top': 1.105, 'bottom': 1.095, 'type': 'order_block'}
2025-05-01 15:24:04,971 - __main__ - INFO -   HTF Bias: bullish
2025-05-01 15:24:04,971 - __main__ - INFO -   Stop Loss: 1.09281
2025-05-01 15:24:04,971 - __main__ - INFO -   Take Profit: 1.1330000000000002
2025-05-01 15:24:04,971 - __main__ - INFO -   Risk-Reward Ratio: 4.59
2025-05-01 15:24:04,971 - __main__ - INFO - Testing risk-reward scenario 2:
2025-05-01 15:24:04,971 - __main__ - INFO -   Direction: SELL
2025-05-01 15:24:04,971 - __main__ - INFO -   Entry Price: 1.1
2025-05-01 15:24:04,971 - __main__ - INFO -   Zone: {'top': 1.105, 'bottom': 1.095, 'type': 'order_block'}
2025-05-01 15:24:04,971 - __main__ - INFO -   HTF Bias: bearish
2025-05-01 15:24:04,971 - __main__ - INFO -   Stop Loss: 1.10721
2025-05-01 15:24:04,971 - __main__ - INFO -   Take Profit: 1.067
2025-05-01 15:24:04,971 - __main__ - INFO -   Risk-Reward Ratio: 4.58
2025-05-01 15:24:04,971 - __main__ - INFO - Testing risk-reward scenario 3:
2025-05-01 15:24:04,971 - __main__ - INFO -   Direction: BUY
2025-05-01 15:24:04,972 - __main__ - INFO -   Entry Price: 1.1
2025-05-01 15:24:04,972 - __main__ - INFO -   Zone: {'top': 1.105, 'bottom': 1.095, 'type': 'fair_value_gap'}
2025-05-01 15:24:04,972 - __main__ - INFO -   HTF Bias: neutral
2025-05-01 15:24:04,972 - __main__ - INFO -   Stop Loss: 1.09281
2025-05-01 15:24:04,972 - __main__ - INFO -   Take Profit: 1.122
2025-05-01 15:24:04,972 - __main__ - INFO -   Risk-Reward Ratio: 3.06
2025-05-01 15:24:04,972 - __main__ - INFO - Testing risk-reward scenario 4:
2025-05-01 15:24:04,972 - __main__ - INFO -   Direction: SELL
2025-05-01 15:24:04,972 - __main__ - INFO -   Entry Price: 1.1
2025-05-01 15:24:04,972 - __main__ - INFO -   Zone: {'top': 1.105, 'bottom': 1.095, 'type': 'fair_value_gap'}
2025-05-01 15:24:04,972 - __main__ - INFO -   HTF Bias: neutral
2025-05-01 15:24:04,972 - __main__ - INFO -   Stop Loss: 1.10721
2025-05-01 15:24:04,972 - __main__ - INFO -   Take Profit: 1.078
2025-05-01 15:24:04,972 - __main__ - INFO -   Risk-Reward Ratio: 3.05
2025-05-01 15:24:04,972 - __main__ - INFO - Testing risk-reward scenario 5:
2025-05-01 15:24:04,972 - __main__ - INFO -   Direction: BUY
2025-05-01 15:24:04,972 - __main__ - INFO -   Entry Price: 1.1
2025-05-01 15:24:04,972 - __main__ - INFO -   Zone: None
2025-05-01 15:24:04,972 - __main__ - INFO -   HTF Bias: bullish
2025-05-01 15:24:04,972 - __main__ - INFO -   Stop Loss: 1.089
2025-05-01 15:24:04,972 - __main__ - INFO -   Take Profit: 1.1330000000000002
2025-05-01 15:24:04,972 - __main__ - INFO -   Risk-Reward Ratio: 3.00
2025-05-01 15:24:04,972 - __main__ - INFO - Testing risk-reward scenario 6:
2025-05-01 15:24:04,972 - __main__ - INFO -   Direction: SELL
2025-05-01 15:24:04,972 - __main__ - INFO -   Entry Price: 1.1
2025-05-01 15:24:04,972 - __main__ - INFO -   Zone: None
2025-05-01 15:24:04,972 - __main__ - INFO -   HTF Bias: bearish
2025-05-01 15:24:04,972 - __main__ - INFO -   Stop Loss: 1.1110000000000002
2025-05-01 15:24:04,972 - __main__ - INFO -   Take Profit: 1.067
2025-05-01 15:24:04,972 - __main__ - INFO -   Risk-Reward Ratio: 3.00
2025-05-01 15:24:04,972 - __main__ - INFO - 
=== Testing CSV Data Analysis ===
2025-05-01 15:24:04,972 - __main__ - INFO - Loading CSV data from data/EURUSD_H1.csv
2025-05-01 15:24:04,973 - __main__ - INFO - Successfully loaded 88 rows from data/EURUSD_H1.csv
2025-05-01 15:24:04,973 - __main__ - INFO - Successfully loaded 88 candles from CSV for EURUSD H1
2025-05-01 15:24:04,973 - trading_bot.strategy.strategy_base - INFO - Initialized ict strategy
2025-05-01 15:24:04,973 - trading_bot.strategy.ict_strategy - INFO - Initialized ICT strategy
2025-05-01 15:24:05,087 - __main__ - INFO - Analysis bias: bearish
2025-05-01 15:24:05,087 - __main__ - INFO - Found 1 order blocks
2025-05-01 15:24:05,087 - __main__ - INFO - Found 0 fair value gaps
2025-05-01 15:24:05,087 - __main__ - INFO - Found 28 liquidity levels
2025-05-01 15:24:05,088 - __main__ - INFO - No signals generated
2025-05-01 15:24:05,088 - __main__ - INFO - CSV Data Analysis: Failed
2025-05-01 15:24:05,088 - __main__ - INFO - 
=== Testing Market Structure Identification ===
2025-05-01 15:24:05,088 - __main__ - INFO - Fetching data for EURUSD H1 for market structure testing...
2025-05-01 15:24:05,088 - trading_bot.data.data_processor - INFO - Loading data from data/EURUSD_H1.csv
2025-05-01 15:24:05,093 - trading_bot.data.data_processor - INFO - Successfully loaded 88 rows from data/EURUSD_H1.csv
2025-05-01 15:24:05,093 - __main__ - INFO - Successfully loaded 88 candles for EURUSD H1
2025-05-01 15:24:05,093 - trading_bot.strategy.strategy_base - INFO - Initialized ict strategy
2025-05-01 15:24:05,093 - trading_bot.strategy.ict_strategy - INFO - Initialized ICT strategy
2025-05-01 15:24:05,097 - __main__ - INFO - Market structure identification results:
2025-05-01 15:24:05,098 - __main__ - INFO -   Trend: bullish
2025-05-01 15:24:05,098 - __main__ - INFO -   Strength: 0
2025-05-01 15:24:05,098 - __main__ - INFO -   Found 4 swing highs
2025-05-01 15:24:05,098 - __main__ - INFO -   Found 5 swing lows
2025-05-01 15:24:05,098 - __main__ - INFO -   Found 1 higher highs
2025-05-01 15:24:05,098 - __main__ - INFO -   Found 3 lower lows
2025-05-01 15:24:05,098 - __main__ - INFO -   Found 1 higher lows
2025-05-01 15:24:05,098 - __main__ - INFO -   Found 2 lower highs
2025-05-01 15:24:05,098 - __main__ - INFO - All ICT strategy tests completed successfully
2025-05-01 15:24:05,098 - trading_bot.data.ctrader_data - INFO - Disconnecting from cTrader API...
2025-05-01 15:24:05,098 - trading_bot.data.ctrader_data - INFO - Disconnected from cTrader API
2025-05-01 15:24:05,099 - trading_bot.data.data_processor - INFO - cTrader connection closed
2025-05-01 15:24:05,099 - trading_bot.strategy.unified_strategy - INFO - Timeframe hierarchy for H1: Higher=H4, Middle=H1, Lower=M30
2025-05-01 15:24:05,099 - trading_bot.strategy.unified_strategy - INFO - Getting historical data for EURUSD on H4
2025-05-01 15:24:05,099 - trading_bot.data.data_processor - WARNING - No data available for EURUSD on H4
2025-05-01 15:24:05,099 - trading_bot.strategy.unified_strategy - ERROR - Error fetching data for EURUSD on H1: A coroutine object is required
2025-05-01 15:24:05,350 - trading_bot.data.crypto_data - INFO - Closed connection to binance exchange
2025-05-01 15:24:05,351 - trading_bot.data.data_processor - INFO - Crypto data connection closed
2025-05-01 15:25:25,162 - trading_bot.utils.visualization - INFO - Initializing visualization module
2025-05-01 15:25:25,164 - trading_bot.data.ctrader_data - INFO - Connecting to cTrader API...
2025-05-01 15:25:25,187 - trading_bot.data.ctrader_data - INFO - Connected to cTrader Open API
2025-05-01 15:25:26,252 - trading_bot.data.ctrader_data - INFO - Application authenticated successfully
2025-05-01 15:25:27,170 - trading_bot.data.ctrader_data - INFO - Connected to cTrader Open API
2025-05-01 15:25:27,201 - trading_bot.data.crypto_data - INFO - Initialized binance exchange connection
2025-05-01 15:25:27,201 - trading_bot.data.data_processor - INFO - Connected to cTrader for live data
2025-05-01 15:25:27,201 - __main__ - INFO - 
=== Testing with EURUSD H1 data ===
2025-05-01 15:25:27,202 - __main__ - INFO - Testing SMC strategy with EURUSD data
2025-05-01 15:25:27,202 - __main__ - INFO - Fetching live data for EURUSD H1 from API...
2025-05-01 15:25:27,202 - trading_bot.data.data_processor - INFO - Getting historical data for EURUSD on H1
2025-05-01 15:25:27,202 - trading_bot.data.ctrader_data - ERROR - Not authenticated with cTrader API
2025-05-01 15:25:27,202 - trading_bot.data.ctrader_data - INFO - Attempting to load data from CSV as fallback
2025-05-01 15:25:27,209 - trading_bot.data.ctrader_data - ERROR - Error loading data from data/EURUSD_H1.csv: Length mismatch: Expected axis has 7 elements, new values have 8 elements
2025-05-01 15:25:27,211 - trading_bot.data.ctrader_data - ERROR - Error loading data from data/EURUSD_H1.csv: Length mismatch: Expected axis has 7 elements, new values have 8 elements
2025-05-01 15:25:27,212 - trading_bot.data.ctrader_data - ERROR - Error loading data from data/EURUSD_H1.csv: Length mismatch: Expected axis has 7 elements, new values have 8 elements
2025-05-01 15:25:27,212 - trading_bot.data.ctrader_data - WARNING - No data file found for EURUSD H1
2025-05-01 15:25:27,213 - trading_bot.data.data_processor - INFO - Loading data from data/EURUSD_H1.csv
2025-05-01 15:25:27,228 - trading_bot.data.data_processor - INFO - Successfully loaded 88 rows from data/EURUSD_H1.csv
2025-05-01 15:25:27,228 - __main__ - ERROR - Error in test_smc_strategy: object DataFrame can't be used in 'await' expression
2025-05-01 15:25:27,228 - __main__ - ERROR - Traceback (most recent call last):
  File "/Users/yegor/Documents/Agency & Security Stuff/trading bot 2/tests/test_smc_strategy.py", line 77, in test_smc_strategy
    df = await data_processor.get_historical_data(symbol, timeframe, num_candles=bars)
TypeError: object DataFrame can't be used in 'await' expression

2025-05-01 15:25:27,229 - __main__ - INFO - 
=== Testing with BTCUSDT H1 data ===
2025-05-01 15:25:27,229 - __main__ - INFO - Testing SMC strategy with BTCUSDT data
2025-05-01 15:25:27,229 - __main__ - INFO - Fetching live data for BTCUSDT H1 from API...
2025-05-01 15:25:27,229 - trading_bot.data.data_processor - INFO - Getting historical data for BTCUSDT on H1
2025-05-01 15:25:27,229 - trading_bot.data.data_processor - ERROR - Error getting crypto data: 'coroutine' object has no attribute 'empty'
2025-05-01 15:25:27,229 - __main__ - ERROR - Error in test_smc_strategy: 'coroutine' object has no attribute 'empty'
2025-05-01 15:25:27,230 - __main__ - ERROR - Traceback (most recent call last):
  File "/Users/yegor/Documents/Agency & Security Stuff/trading bot 2/tests/test_smc_strategy.py", line 77, in test_smc_strategy
    df = await data_processor.get_historical_data(symbol, timeframe, num_candles=bars)
  File "/Users/yegor/Documents/Agency & Security Stuff/trading bot 2/trading_bot/data/data_processor.py", line 694, in get_historical_data
    if df is None or df.empty:
AttributeError: 'coroutine' object has no attribute 'empty'

2025-05-01 15:25:27,232 - __main__ - INFO - 
=== Testing with XAUUSD H1 data (Gold) ===
2025-05-01 15:25:27,232 - __main__ - INFO - Testing SMC strategy with XAUUSD data
2025-05-01 15:25:27,232 - __main__ - INFO - Fetching live data for XAUUSD H1 from API...
2025-05-01 15:25:27,232 - trading_bot.data.data_processor - INFO - Getting historical data for XAUUSD on H1
2025-05-01 15:25:27,232 - trading_bot.data.ctrader_data - ERROR - Not authenticated with cTrader API
2025-05-01 15:25:27,232 - trading_bot.data.ctrader_data - INFO - Attempting to load data from CSV as fallback
2025-05-01 15:25:27,235 - trading_bot.data.ctrader_data - ERROR - Error loading data from data/XAUUSD_H1.csv: Length mismatch: Expected axis has 7 elements, new values have 8 elements
2025-05-01 15:25:27,236 - trading_bot.data.ctrader_data - ERROR - Error loading data from data/XAUUSD_H1.csv: Length mismatch: Expected axis has 7 elements, new values have 8 elements
2025-05-01 15:25:27,237 - trading_bot.data.ctrader_data - ERROR - Error loading data from data/XAUUSD_H1.csv: Length mismatch: Expected axis has 7 elements, new values have 8 elements
2025-05-01 15:25:27,237 - trading_bot.data.ctrader_data - WARNING - No data file found for XAUUSD H1
2025-05-01 15:25:27,237 - trading_bot.data.data_processor - INFO - Loading data from data/XAUUSD_H1.csv
2025-05-01 15:25:27,240 - trading_bot.data.data_processor - INFO - Successfully loaded 318 rows from data/XAUUSD_H1.csv
2025-05-01 15:25:27,240 - __main__ - ERROR - Error in test_smc_strategy: object DataFrame can't be used in 'await' expression
2025-05-01 15:25:27,240 - __main__ - ERROR - Traceback (most recent call last):
  File "/Users/yegor/Documents/Agency & Security Stuff/trading bot 2/tests/test_smc_strategy.py", line 77, in test_smc_strategy
    df = await data_processor.get_historical_data(symbol, timeframe, num_candles=bars)
TypeError: object DataFrame can't be used in 'await' expression

2025-05-01 15:25:27,241 - __main__ - INFO - 
=== Testing with NAS100 H1 data (Nasdaq 100) ===
2025-05-01 15:25:27,241 - __main__ - INFO - Testing SMC strategy with NAS100 data
2025-05-01 15:25:27,241 - __main__ - INFO - Fetching live data for NAS100 H1 from API...
2025-05-01 15:25:27,241 - trading_bot.data.data_processor - INFO - Getting historical data for NAS100 on H1
2025-05-01 15:25:27,241 - trading_bot.data.data_processor - INFO - Loading data from data/NAS100_H1.csv
2025-05-01 15:25:27,244 - trading_bot.data.data_processor - INFO - Successfully loaded 146 rows from data/NAS100_H1.csv
2025-05-01 15:25:27,244 - __main__ - ERROR - Error in test_smc_strategy: object DataFrame can't be used in 'await' expression
2025-05-01 15:25:27,244 - __main__ - ERROR - Traceback (most recent call last):
  File "/Users/yegor/Documents/Agency & Security Stuff/trading bot 2/tests/test_smc_strategy.py", line 77, in test_smc_strategy
    df = await data_processor.get_historical_data(symbol, timeframe, num_candles=bars)
TypeError: object DataFrame can't be used in 'await' expression

2025-05-01 15:25:27,245 - __main__ - INFO - 
=== Testing session analyzer integration ===
2025-05-01 15:25:27,275 - trading_bot.data.ctrader_data - INFO - Account authenticated successfully
2025-05-01 15:25:27,281 - __main__ - INFO - Found 0 Classic Buy/Sell Day patterns
2025-05-01 15:25:27,281 - __main__ - INFO - Found 0 London Swing to NY Reversal patterns
2025-05-01 15:25:27,281 - trading_bot.strategy.strategy_base - INFO - Initialized Smart Money Concepts strategy
2025-05-01 15:25:27,281 - trading_bot.strategy.smc_strategy - INFO - Initialized SMC strategy with SMC and Session analyzers
2025-05-01 15:25:27,289 - trading_bot.data.crypto_data - INFO - Initialized binance exchange connection
2025-05-01 15:25:27,289 - trading_bot.data.data_processor - INFO - Connected to cTrader for live data
2025-05-01 15:25:27,289 - trading_bot.strategy.strategy_base - INFO - Initialized Smart Money Concepts strategy
2025-05-01 15:25:27,289 - trading_bot.strategy.smc_strategy - INFO - Initialized SMC strategy with SMC and Session analyzers
2025-05-01 15:25:27,289 - trading_bot.strategy.signal_generator - INFO - Added smc strategy to signal generator
2025-05-01 15:25:27,289 - trading_bot.strategy.strategy_base - INFO - Initialized ict strategy
2025-05-01 15:25:27,289 - trading_bot.strategy.ict_strategy - INFO - Initialized ICT strategy
2025-05-01 15:25:27,289 - trading_bot.strategy.signal_generator - INFO - Added ict strategy to signal generator
2025-05-01 15:25:27,289 - trading_bot.strategy.strategy_base - INFO - Initialized combined strategy
2025-05-01 15:25:27,289 - trading_bot.strategy.strategy_base - INFO - Initialized Smart Money Concepts strategy
2025-05-01 15:25:27,289 - trading_bot.strategy.smc_strategy - INFO - Initialized SMC strategy with SMC and Session analyzers
2025-05-01 15:25:27,289 - trading_bot.strategy.strategy_base - INFO - Initialized ict strategy
2025-05-01 15:25:27,289 - trading_bot.strategy.ict_strategy - INFO - Initialized ICT strategy
2025-05-01 15:25:28,454 - trading_bot.analysis.sentiment - INFO - Loaded distilbert sentiment model successfully
2025-05-01 15:25:28,455 - trading_bot.strategy.combined_strategy - INFO - Initialized combined strategy with SMC, ICT, Technical, and Sentiment analysis
2025-05-01 15:25:28,455 - trading_bot.strategy.signal_generator - INFO - Added combined strategy to signal generator
2025-05-01 15:25:28,455 - trading_bot.strategy.strategy_base - INFO - Initialized Unified Strategy strategy
2025-05-01 15:25:28,455 - trading_bot.strategy.signal_generator - INFO - Added unified strategy to signal generator
2025-05-01 15:25:28,455 - trading_bot.strategy.signal_generator - INFO - Added UnifiedStrategy with enhanced multi-timeframe analysis
2025-05-01 15:25:28,836 - trading_bot.analysis.sentiment - INFO - Loaded distilbert sentiment model successfully
2025-05-01 15:25:28,837 - trading_bot.strategy.signal_generator - INFO - Initialized signal generator with 4 strategies
2025-05-01 15:25:28,837 - trading_bot.strategy.signal_generator - INFO - Signal generator initialized with all strategies
2025-05-01 15:25:28,837 - trading_bot.strategy.signal_generator - INFO - Generating signals for EURUSD on H1 timeframe
2025-05-01 15:25:28,837 - trading_bot.strategy.smc_strategy - INFO - Analyzing EURUSD on H1 timeframe using SMC strategy
2025-05-01 15:25:28,837 - trading_bot.analysis.smc_analyzer - INFO - Starting SMC analysis for EURUSD with 72 candles
2025-05-01 15:25:28,841 - trading_bot.analysis.smc_analyzer - INFO - Market structure for EURUSD: neutral
2025-05-01 15:25:28,843 - trading_bot.analysis.smc_analyzer - INFO - Found 1 key levels for EURUSD
2025-05-01 15:25:28,845 - trading_bot.analysis.smc_analyzer - INFO - Found 0 order blocks for EURUSD
2025-05-01 15:25:28,846 - trading_bot.analysis.smc_analyzer - INFO - Found 0 fair value gaps for EURUSD
2025-05-01 15:25:28,848 - trading_bot.analysis.smc_analyzer - INFO - Found 0 liquidity levels for EURUSD
2025-05-01 15:25:28,849 - trading_bot.analysis.smc_analyzer - INFO - Order flow analysis completed for EURUSD
2025-05-01 15:25:28,849 - trading_bot.analysis.smc_analyzer - INFO - Found 0 liquidity sweeps for EURUSD
2025-05-01 15:25:28,849 - trading_bot.analysis.smc_analyzer - INFO - Analyzing trade setups for Unknown with 72 candles
2025-05-01 15:25:28,851 - trading_bot.analysis.smc_analyzer - INFO - Market structure identified: undefined
2025-05-01 15:25:28,853 - trading_bot.analysis.smc_analyzer - INFO - Order blocks identified: 0
2025-05-01 15:25:28,854 - trading_bot.analysis.smc_analyzer - INFO - Fair value gaps identified: 0
2025-05-01 15:25:28,856 - trading_bot.analysis.smc_analyzer - INFO - Liquidity levels identified: 0
2025-05-01 15:25:28,857 - trading_bot.analysis.smc_analyzer - INFO - Found 0 trade setups for EURUSD
2025-05-01 15:25:28,880 - trading_bot.analysis.smc_analyzer - INFO - Found 0 Classic Buy/Sell Day patterns for EURUSD
2025-05-01 15:25:28,880 - trading_bot.analysis.smc_analyzer - INFO - Found 0 London Swing to NY Reversal patterns for EURUSD
2025-05-01 15:25:28,911 - trading_bot.strategy.smc_strategy - INFO - Found 0 Classic Buy/Sell Day patterns for EURUSD
2025-05-01 15:25:28,911 - trading_bot.strategy.smc_strategy - INFO - Found 0 London Swing to NY Reversal patterns for EURUSD
2025-05-01 15:25:28,911 - trading_bot.strategy.signal_generator - INFO - Strategy smc generated 0 signals
2025-05-01 15:25:28,911 - __main__ - INFO - Generated 0 signals
2025-05-01 15:25:28,911 - __main__ - INFO - Session analysis is included in SMC analysis
2025-05-01 15:25:28,911 - __main__ - INFO - Found 0 Classic Buy/Sell Day patterns
2025-05-01 15:25:28,911 - __main__ - INFO - Found 0 London Swing to NY Reversal patterns
2025-05-01 15:25:28,919 - __main__ - INFO - All tests completed
2025-05-01 15:25:28,919 - __main__ - INFO - Closing data processor connections...
2025-05-01 15:25:40,501 - trading_bot.data.ctrader_data - INFO - Connecting to cTrader API...
2025-05-01 15:25:40,522 - trading_bot.data.ctrader_data - INFO - Connected to cTrader Open API
2025-05-01 15:25:41,590 - trading_bot.data.ctrader_data - INFO - Application authenticated successfully
2025-05-01 15:25:42,507 - trading_bot.data.ctrader_data - INFO - Connected to cTrader Open API
2025-05-01 15:25:42,536 - trading_bot.data.crypto_data - INFO - Initialized binance exchange connection
2025-05-01 15:25:42,537 - trading_bot.data.data_processor - INFO - Connected to cTrader for live data
2025-05-01 15:25:42,537 - trading_bot.strategy.strategy_base - INFO - Initialized Unified Strategy strategy
2025-05-01 15:38:31,585 - trading_bot.utils.visualization - INFO - Initializing visualization module
2025-05-01 15:38:31,586 - __main__ - INFO - Looking for data file at: charts/forex/EURUSD60.csv
2025-05-01 15:38:31,822 - __main__ - INFO - Successfully loaded 100000 rows from charts/forex/EURUSD60.csv
2025-05-01 15:38:31,831 - __main__ - INFO - Running backtest for EURUSD H1 from 2022-01-01 to 2022-03-31
2025-05-01 15:38:31,832 - trading_bot.strategy.strategy_base - INFO - Initialized ict strategy
2025-05-01 15:38:31,832 - trading_bot.strategy.ict_strategy - INFO - Initialized ICT strategy
2025-05-01 15:38:31,834 - __main__ - INFO - Filtered to 1516 candles from 2022-01-02 22:00:00 to 2022-03-31 00:00:00
2025-05-01 15:38:31,886 - __main__ - INFO - Backtest completed with 0 trades
2025-05-01 15:38:31,886 - __main__ - INFO - Win rate: 0.00%
2025-05-01 15:38:31,886 - __main__ - INFO - Total return: 0.00%
2025-05-01 15:38:31,886 - __main__ - INFO - Profit factor: inf
2025-05-01 15:38:31,886 - __main__ - INFO - Max drawdown: 0.00%
2025-05-01 15:38:31,886 - __main__ - ERROR - Backtest failed to generate results
